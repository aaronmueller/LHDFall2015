<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

  <head>
    <title>The GraphicsOutput class - Panda3D Manual</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="style.css" type="text/css"><link rel="shortcut icon" href="favicon.ico">    <meta name="keywords" content="Panda3D, Panda, 3D, Python, graphics, free, game, engine, game rendering engine, simulation, open source, free download, Disney, ETC, Entertainment Technology Center, open-source">
    <meta name="description" content="Free open source 3D game and simulation engine developed by Disney and maintained by Carnegie Mellon University\'s Entertainment Technology Center">
    </head>
    <body>
<table width=960 cellpadding=0 cellspacing=0 id=main align=center>
<tr>
<td id=borderleft></td>
<td id=maincenter valign=top>
<tr><td id=pcontent valign=top><h2>Panda3D Manual: The GraphicsOutput class</h2>
<div style="width:100%; padding: 1px;" class=subnavigation>
<table width="640px" cellpadding="0" cellspacing="0" border="0">
              <tr>
              <td width="70px" align="left">&nbsp;&nbsp;</td>
              <td width="70px" align="center"></td>
              <td width="70px" align="right">&nbsp;&nbsp;</td>
              </tr></table></div><div class='wikicontent' id='wikicontentid'><br><small><i>This page is not in the table of contents.</i></small><br><p>Buffers and windows, encapsulated in the <code>GraphicsBuffer</code> and <code>GraphicsWindow</code> classes are almost interchangable in Panda. In fact most operations in the <code>GraphicsEngine</code> class are defined on and return <code>GraphicsOutput</code> objects, the class that both <code>GraphicsBuffer</code> and <code>GraphicsWindow</code> inherit from. Therefore, we will discuss the properties of <code>GraphicsOutput</code> objects first.
</p><p>The first very important note is that none of these classes are meant to be constructed directly, i.e.:
</p>
<pre class="python">myOutput=GraphicsOutput<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <br />myWindow=GraphicsWindow<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />myBuffer=GraphicsBuffer<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
<p>will not work. Refer to <a href="The_Graphics_Engine.html" title="The Graphics Engine">The Graphics Engine</a> for how to create these objects. Furthermore, since <code>GraphicsOutput</code> is an abstract class, <code>GraphicsWindow</code> objects will be used in code examples. 
</p><p>All <code>GraphicsOutput</code> objects have <code>getGsg()</code>, <code>getPipe()</code>, and <code>getName()</code> which return respectively their  <a href="The_Graphics_Engine.html" title="The Graphics Engine">GraphicsStateGuardian</a>, <a href="The_Graphics_Pipe.html" title="The Graphics Pipe"> GraphicsPipe</a>, and <a href="The_Graphics_Engine.html" title="The Graphics Engine">name</a>. You can also get the width and height using <code>getXSize()</code> and <code>getYSize()</code>.
</p>
<pre class="python"><span style="color: #ff7700;font-weight:bold;">from</span> panda3d.<span style="color: black;">core</span> <span style="color: #ff7700;font-weight:bold;">import</span> GraphicsWindow<br />&#160;<br /><span style="color: #808080; font-style: italic;">#assume we already have a window setup and in myWindow</span><br />myWindowGsg=myWindow.<span style="color: black;">getGsg</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />myWindowPipe=myWindow.<span style="color: black;">getPipe</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />myWindowName=myWindow.<span style="color: black;">getName</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />&#160;<br />myWindowWidth=myWindow.<span style="color: black;">getXSize</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />myWindowLength=myWindow.<span style="color: black;">getYSize</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
<p>You can also save a screenshot from any <code>GraphicsOutput</code> by using <code>saveScreenShot(fileName)</code>, where <code>fileName</code> is the name of the picture(the format of the picture is specified by the extension of <code>filename</code>). Returns <code>True</code> upon succes and <code>False</code> otherwise. The picture is saved in the directory of the script you are running.
</p>
<pre class="python"><span style="color: #ff7700;font-weight:bold;">from</span> panda3d.<span style="color: black;">core</span> <span style="color: #ff7700;font-weight:bold;">import</span> Filename<br />myWindow.<span style="color: black;">saveScreenShot</span><span style="color: black;">&#40;</span>Filename<span style="color: black;">&#40;</span><span style="color: #483d8b;">'hello.bmp'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
<p>This naturally flows into rendering into a texture. We'll start with copying a scene. If you want to get a texture that simply copies what's in its <code>GraphicsOutput</code> object, you must first make a call to <code>setupCopyTexture()</code>. You can then get the texture by using <code>getTexture()</code>. You can now <a href="Simple_Texture_Replacement.html" title="Simple Texture Replacement">apply the texture to a NodePath</a> as you would a texture loaded from memory. Thanks to the magic of pointers, the texture automatically updates itself if the contents of its <code>GraphicsOutput</code> change. If you do not want this behaviour you should use <code>detachTexture()</code> when you no longer want the texture to be updated. However, since the first frame is always blank, the best way to use <code>detachTexture()</code> is in a <a href="Tasks.html" title="Tasks">do-later task</a> or <a href="Event_Handling.html" title="Event Handling" class="mw-redirect">event</a>.
</p>
<pre class="python">myWindow.<span style="color: black;">setupCopyTexture</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />myTexture=myWindow.<span style="color: black;">getTexture</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />&#160;<br /><span style="color: #808080; font-style: italic;">#assume myModel is already setup</span><br />myModel.<span style="color: black;">setTexture</span><span style="color: black;">&#40;</span>myTexture<span style="color: black;">&#41;</span><br />&#160;<br /><span style="color: #808080; font-style: italic;">#and if you want to stop the texture from updating itself</span><br /><span style="color: #ff7700;font-weight:bold;">def</span> stopUpdating<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:<br />   <span style="color: #ff7700;font-weight:bold;">global</span> myWindow<br />   myWindow.<span style="color: black;">detachTexture</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />taskMgr.<span style="color: black;">doMethodLater</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>,stopUpdating,<span style="color: #483d8b;">'stops updating'</span><span style="color: black;">&#41;</span></pre>
<p>While this is helpful, you may want to render an entirely new scene into a <code>GraphicsOutput</code> and then place it on screen (i.e. you have a televsion in your main scene and want to generate the show on the spot). The first thing you do is create a <code>GraphicsOutput</code> to hold the scene. You do this by calling <code>makeTextureBuffer</code>. It makes a <code>GraphicsOutput</code> specifically for rendering a scene and then retrieving it by <code>getTexture()</code>.
</p>
<pre class="python">makeTextureBuffer<span style="color: black;">&#40;</span>name, xSize, ySize<span style="color: black;">&#41;</span></pre>
<p>The arguments <code>name</code>, <code>xSize</code>, and <code>ySize</code> mean the same things they do for <a href="The_Graphics_Engine.html" title="The Graphics Engine">makeWindow and makeBuffer</a>.
</p>
<pre>You then have to create a new <a href="Camera_Control.html" title="Camera Control">camera</a> for the new scene, using   
</pre>
<pre class="python">base.<span style="color: black;">makeCamera</span><span style="color: black;">&#40;</span>win, sort=<span style="color: #ff4500;">0</span>, scene=<span style="color: #008000;">None</span>,<br />  displayRegion=<span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span>,<span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">0</span>,<span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>, aspectRatio=<span style="color: #008000;">None</span>, camName=<span style="color: #483d8b;">'cam'</span><span style="color: black;">&#41;</span></pre>
<p>Here's a break down of what the parameters mean:
</p>
<center><table>
<tr><td style="vertical-align: top;"><code>win</code></td><td>The <code>GraphicsOutput</code> object that you want to make the camera for</td></tr>
<tr><td style="vertical-align: top;"><code>sort</code></td><td>The sort value of the camera. Decides the order in which <code>DisplayRegion</code>s in the same window are drawn. See API for more information.</td></tr>
<tr><td style="vertical-align: top;"><code>scene</code></td><td>Due to deprecation of other functions this parameter does not affect anything.</td></tr>
<tr><td style="vertical-align: top;"><code>displayRegion</code></td><td>The area of the new <code>GraphicsOutput</code> that you want to cover in the form (left start point, right end point, bottom start point, top end point). (0,0) represent the bottom left of the screen and (1,1) represents the top right. Therefore (0,1,0,1) represents the entire area. Arguments must be between 0 and 1.</td></tr>
<tr><td style="vertical-align: top;"><code>aspectRatio</code></td><td>The aspectRatio of the <code>GraphicsOutput</code>. When this is left to <code>None</code> <code>makeCamera</code> uses the aspectRatio of the default window.</td></tr>
<tr><td style="vertical-align: top;"><code>camName</code></td><td>The name of the node that represents this camera in the scene graph</td></tr>
</table></center>
<p>Cameras render whatever is connected to their ancestors in the scene graph. Therefore if you want a truly independent scene you have to start a new scene graph. Create a dummy <a href="The_Scene_Graph.html" title="The Scene Graph">NodePath</a> and now <code>reparentTo</code> the new camera to this node. Now you can treat the new scene and the new camera like you would <a href="Scene_Graph_Manipulations.html" title="Scene Graph Manipulations">render</a> and your scene gets drawn to your <code>GraphicsOuptut</code>.
</p><p>However, any state changes you make to the NodePath <code>camera</code> will no longer affect your new camera. Also, since the standard mouse controls work on the <code>camera</code> NodePath, these will not work either. You can alternatively use the Camera class method <code>setScene(scenePath)</code>, where <code>scenePath</code> is the top of the scene graph you want to draw. This preserves the standard heirarchy stated in <a href="Camera_Control.html" title="Camera Control">Camera Control</a>.
</p>
<pre class="python"><span style="color: #808080; font-style: italic;"># I use a GraphicsBuffer only because this is a process you</span><br /><span style="color: #808080; font-style: italic;"># probably want the user to see</span><br />myBuffer=myWindow.<span style="color: black;">makeTextureBuffer</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Another Scene&quot;</span>, <span style="color: #ff4500;">800</span>,<span style="color: #ff4500;">600</span><span style="color: black;">&#41;</span><br />&#160;<br /><span style="color: #808080; font-style: italic;"># You must pass a string to the NodePath constructor or</span><br /><span style="color: #808080; font-style: italic;"># attempts to set it as a parent will remove the child from the graph</span><br />myNewScene=NodePath<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;myRender&quot;</span><span style="color: black;">&#41;</span><br />myNewCamera=base.<span style="color: black;">makeCamera</span><span style="color: black;">&#40;</span>myBuffer<span style="color: black;">&#41;</span><br />myNewCamera.<span style="color: black;">reparentTo</span><span style="color: black;">&#40;</span>myNewScene<span style="color: black;">&#41;</span><br /><span style="color: #808080; font-style: italic;">#or myNewCamera.node().setScene(myNewScene)</span><br />&#160;<br /><span style="color: #808080; font-style: italic;">#You can now get a texture that represents anything</span><br /><span style="color: #808080; font-style: italic;"># you do in this new scene (that is still automatically updated)</span><br />myTexture=myBuffer.<span style="color: black;">getTexture</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>

<!-- 
NewPP limit report
Preprocessor node count: 187/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mw_manual:pcache:idhash:1151-0!*!0!*!*!*!* and timestamp 20130413213709 -->
</div><div style="width:100%; padding: 1px;" class=subnavigation>
<table width="640px" cellpadding="0" cellspacing="0" border="0">
              <tr>
              <td width="70px" align="left">&nbsp;&nbsp;</td>
              <td width="70px" align="center"></td>
              <td width="70px" align="right">&nbsp;&nbsp;</td>
              </tr></table></div><div id=legal>&copy; Carnegie Mellon University 2010</div></td></tr></table></td><td id=borderright></td></tr></table></td><td id=borderright></td></tr></table></body></html>
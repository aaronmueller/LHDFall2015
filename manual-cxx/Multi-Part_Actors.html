<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

  <head>
    <title>Multi-Part Actors - Panda3D Manual</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="style.css" type="text/css"><link rel="shortcut icon" href="favicon.ico">    <meta name="keywords" content="Panda3D, Panda, 3D, Python, graphics, free, game, engine, game rendering engine, simulation, open source, free download, Disney, ETC, Entertainment Technology Center, open-source">
    <meta name="description" content="Free open source 3D game and simulation engine developed by Disney and maintained by Carnegie Mellon University\'s Entertainment Technology Center">
    </head>
    <body>
<table width=960 cellpadding=0 cellspacing=0 id=main align=center>
<tr>
<td id=borderleft></td>
<td id=maincenter valign=top>
<tr><td id=pcontent valign=top><h2>Panda3D Manual: Multi-Part Actors</h2>
<div style="width:100%; padding: 1px;" class=subnavigation>
<table width="640px" cellpadding="0" cellspacing="0" border="0">
              <tr>
              <td width="70px" align="left">&nbsp;&nbsp;<a style="text-decoration:none" href="Actor_Animations.html"><img border=0 width=16 height=16 src="arrow_left.png" align=absmiddle> <u>Prev</u></a></td>
              <td width="70px" align="center"><a style="text-decoration:none" href="Main_Page.html"><img border=0 width=16 height=16 src="arrow_up.png" align=absmiddle><u>Top</u></a></td>
              <td width="70px" align="right"><a style="text-decoration:none" href="Attaching_an_Object_to_a_Joint.html"><u>Next</u> <img border=0 width=16 height=16 src="arrow_right.png" align=absmiddle></a>&nbsp;&nbsp;</td>
              </tr></table></div><div class='wikicontent' id='wikicontentid'><p><span class="suppress-screenshots"></span>
</p><p>It is possible to assemble a character model out of several separate pieces (separate models). If this is the case, then the pieces must contain bones that can be attached to each other. For example, if you have a robot consisting of a set of legs and a swappable torso, and if you want to glue them together at the waist, then the legs model should contain a bone "waist", and the torso model should also contain a bone "waist". You can then attach them together: 
</p>
<pre class="python">nodePath = Actor.<span style="color: black;">Actor</span><span style="color: black;">&#40;</span><span style="color: black;">&#123;</span><br />    <span style="color: #483d8b;">'legs'</span>:<span style="color: #483d8b;">'RobotLegs.egg'</span>,<br />    <span style="color: #483d8b;">'torso'</span>:<span style="color: #483d8b;">'RobotTorso1.egg'</span>,<br />  <span style="color: black;">&#125;</span>,<span style="color: black;">&#123;</span><span style="color: #483d8b;">'legs'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">'RobotLegs-Dance.egg'</span><span style="color: black;">&#125;</span>,<br />     <span style="color: #483d8b;">'torso'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">'RobotTorso1-Dance.egg'</span><span style="color: black;">&#125;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span><br />nodePath.<span style="color: black;">attach</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'torso'</span>,<span style="color: #483d8b;">'legs'</span>,<span style="color: #483d8b;">'waist'</span><span style="color: black;">&#41;</span></pre>
<p>Multi-part actors are fairly complicated.  Each part is loaded from a separate egg file, and each part has its own set of animations that are applied to it.  For each animation you want to play, you will need to have a corresponding egg file for each part.
</p><p>In the Actor constructor, you specify the list of model files with a dictionary of part name to egg file, as shown above.  The list of animation files is more complicated; it's a dictionary of dictionaries.  The outer dictionary maps part names to animation dictionaries.  Each animation dictionary maps animation name to animation egg file for the corresponding part.
</p><p>Here's another example:
</p>
<pre class="python">myactor = Actor<span style="color: black;">&#40;</span><br />&#160;<br />    <span style="color: #808080; font-style: italic;"># part dictionary</span><br />    <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;head&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-head-mod&quot;</span>, <br />     <span style="color: #483d8b;">&quot;torso&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-torso-mod&quot;</span>, <br />     <span style="color: #483d8b;">&quot;legs&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-legs-mod&quot;</span><span style="color: black;">&#125;</span>, <br />&#160;<br />    <span style="color: #808080; font-style: italic;"># dictionary of anim dictionaries</span><br />    <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;head&quot;</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;walk&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-head-walk&quot;</span>, <br />             <span style="color: #483d8b;">&quot;run&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-head-run&quot;</span><span style="color: black;">&#125;</span>, <br />     <span style="color: #483d8b;">&quot;torso&quot;</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;walk&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-torso-walk&quot;</span>, <br />              <span style="color: #483d8b;">&quot;run&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-torso-run&quot;</span><span style="color: black;">&#125;</span>, <br />     <span style="color: #483d8b;">&quot;legs&quot;</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;walk&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-legs-walk&quot;</span>, <br />             <span style="color: #483d8b;">&quot;run&quot;</span>:<span style="color: #483d8b;">&quot;char/dogMM/dogMM_Shorts-legs-run&quot;</span><span style="color: black;">&#125;</span> <br />     <span style="color: black;">&#125;</span><span style="color: black;">&#41;</span></pre>
<p>In addition multipart actor parts need to be connected together in a meaningful fashion:
</p>
<pre class="python">myactor.<span style="color: black;">attach</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;head&quot;</span>, <span style="color: #483d8b;">&quot;torso&quot;</span>, <span style="color: #483d8b;">&quot;joint-head&quot;</span><span style="color: black;">&#41;</span><br />myactor.<span style="color: black;">attach</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;torso&quot;</span>, <span style="color: #483d8b;">&quot;legs&quot;</span>, <span style="color: #483d8b;">&quot;joint-hips&quot;</span><span style="color: black;">&#41;</span></pre>
<p>The attach() call names two parts, and reparents the part named by the first parameter onto the part named by the second parameter, at the node named by the third parameter, which should be an exposed joint (that is, a joint in the part named by the second parameter).  You must have already exposed the joint before this call, either with the egg-optchar command line tool, or by calling actor.exposeJoint() at runtime.
</p><p>After calling attach(), the stacked part will inherit the animation from the attachment joint, by virtue of the scene graph relationship.
</p>
<h2> <span class="mw-headline" id="Animation">Animation</span></h2>
<p>You can animate the parts as normal animations, but you need to supply the partname, like this:
</p>
<pre class="python">myactor.<span style="color: black;">play</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Animation Name'</span>, <span style="color: #483d8b;">'Part Name'</span><span style="color: black;">&#41;</span></pre>
<p>If you want to use AnimControl, as explained in <a href="Actor_Animations.html" title="Actor Animations">this section</a>, you must supply the partname as second parameter in getAnimControl():
</p>
<pre class="python"><span style="color: #808080; font-style: italic;"># you can see you just need to call</span><br /><span style="color: #808080; font-style: italic;"># actor.getAnimControl('Animation Name','Part Name')</span><br /><span style="color: #808080; font-style: italic;"># to get access to the AnimControl of that part.</span><br />&#160;<br />ac=actor.<span style="color: black;">getAnimControl</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Animation Name'</span>,<span style="color: #483d8b;">'Part Name'</span><span style="color: black;">&#41;</span><br />ac.<span style="color: black;">isPlaying</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns a boolean whether the animation is playing or not</span><br />ac.<span style="color: black;">getFrame</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns the current frame number</span><br />ac.<span style="color: black;">getFrameRate</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns the speed of the animation, in frames per second</span><br />ac.<span style="color: black;">getFullFframe</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns a floating-point frame number. Note: This number keeps counting and may exceed the total number of frames.</span><br />ac.<span style="color: black;">getFullFrame</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns an integer frame number. Note: This number keeps counting and may exceed the total number of frames.</span><br />ac.<span style="color: black;">getNextFrame</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns the number of the next frame on the queue.</span><br />ac.<span style="color: black;">getNumFrames</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns the total number of frames</span><br />ac.<span style="color: black;">getPlayRate</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#returns the playrate. explained further below</span><br />ac.<span style="color: black;">loop</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#starts playing the animation in a loop</span><br />ac.<span style="color: black;">play</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#starts playing the animation</span><br />ac.<span style="color: black;">pose</span><span style="color: black;">&#40;</span>frame<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#poses at frame frame</span><br />ac.<span style="color: black;">setPlayRate</span><span style="color: black;">&#40;</span>rate<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#sets the playrate.  explained further below</span><br />ac.<span style="color: black;">stop</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;">#stops the animation</span></pre>

<!-- 
NewPP limit report
Preprocessor node count: 47/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mw_manual:pcache:idhash:2049-0!*!0!*!*!*!* and timestamp 20130413053142 -->
</div><div style="width:100%; padding: 1px;" class=subnavigation>
<table width="640px" cellpadding="0" cellspacing="0" border="0">
              <tr>
              <td width="70px" align="left">&nbsp;&nbsp;<a style="text-decoration:none" href="Actor_Animations.html"><img border=0 width=16 height=16 src="arrow_left.png" align=absmiddle> <u>Prev</u></a></td>
              <td width="70px" align="center"><a style="text-decoration:none" href="Main_Page.html"><img border=0 width=16 height=16 src="arrow_up.png" align=absmiddle><u>Top</u></a></td>
              <td width="70px" align="right"><a style="text-decoration:none" href="Attaching_an_Object_to_a_Joint.html"><u>Next</u> <img border=0 width=16 height=16 src="arrow_right.png" align=absmiddle></a>&nbsp;&nbsp;</td>
              </tr></table></div><div id=legal>&copy; Carnegie Mellon University 2010</div></td></tr></table></td><td id=borderright></td></tr></table></td><td id=borderright></td></tr></table></body></html>